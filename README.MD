# Примеры скриптов на python

## tsl_sync_check
Скрипт предназначен для проверки корректности работы утилиты, загружающей сертификаты и списки отзыва
доверенных удостоверяющих центров МинКомСвязи.

Список доверенных УЦ приведён в xml-файле, там же приведены ссылки на сертификаты и списки отзыва.
Список УЦ доступен по URL https://e-trust.gosuslugi.ru/CA/DownloadTSL?schemaVersion=0

Скрипт скачивает список УЦ, запускает утилиту, скачивающую сертификаты и списки отзыва,
производит разбор её диагностических сообщений.

Также скрипт производит парсинг xml-файла УЦ, подсчитывает количество сертификатов и списков отзыва,
указанных в файле, производит подсчёт файлов, полученных утилитой и сохранённых на диске, и проверяет
условие: количество сохранённых сертификатов и списков отзыва, суммированное с количеством просроченных
сертификатов и списов отзыва, о которых сообщила утилита загрузки в процессе работы, должно совпадать
с общим количеством сертификатов и списков отзыва, описанных в списке доверенных УЦ.

N(сохранённых) + N(просроченных) = N(описанных)

## cert_sync
Скрипт запускает утилиту загрузки сертификатов и списков отзыва на удалённом хосте посредством SSH
и передаёт загруженные файлы на другой хост, где работает сервис проверки электронных подписей.
После передачи файлов производится вызов REST API сервиса проверки ЭЦП, сигнализируя о необходимости
перечитать список сертификатов и списков отзыва. Для вызова API сначала производится получение CSRF-токена.

Параметры скрипта задаются в ini-файле.

## fetch_to_csv
Скрипт произвозит выборку параметров из сервера мониторинга Zabbix на основании конфигурационного файла
и временного промежутка, который задаётся в параметрах командной строки. Полученные данные сохраняются
в csv-файле для последующей обработки.
